## Table of contents
* [Drawings](#1-dawings)
* [Write Code](#2-write-code)
* [Write Tests](#3-write-pytest)
* [Generate pip Package](#4-generate-pip-package)

## 1. Drawings
For drawings (e.g. in readme-files), we recomment to use the program [Inkscape](https://inkscape.org/). It is open source software and runs on Linux, Mac and Windows. If you want to draw electirc circuits, we recommend this library on [github](https://github.com/upb-lea/Inkscape_electric_Symbols).

## 2. Install the transistordatabase as a pip-package in developer mode
To develop code that is also

## 3. Write Code
To develop code that will later be delivered as pip-package it is useful to install the code in developer mode. Note about the '.' point!
```
cd /source/of/transistordatabase-git/
pip install -e .
```
The code in the installed pip-packet (corresponds to the linked git reposistory) is now changed in realtime. 
Note: When using the Pycharm Python Console, the kernel must be restarted for changes!

### 3.1 Sphinx documentation using docstrings
Documentation is generated by Sphinx, and Sphinx reads the docstrings inside the code. Make sure to keep the docstrings up-to-date when making a change!
Sphinx uses autodoc extension which generates documentation automatically by reading the docstrings.
The docstrings can be written in rst file format whereas other formats like google docstrings are also available.

Find a rst and sphinx cheat sheet [here](https://sphinx-tutorial.readthedocs.io/cheatsheet/)

Step 1: Use [sphinx-quickstart](https://www.sphinx-doc.org/en/master/man/sphinx-quickstart.html) feature of sphinx which will setup the required files.

Step 2: Configure the conf.py file with necessary extensions.

Step 3: Create the necessary .rst files like _introduction, installation, transistordatabase_ and add the tree structure in index.rst.

Step 4: Point to folder where Makefile exists and execute command _**"make html"**_ to generate documentation. The generated HTML files will be placed under _build\html folder.

For generating multiversion documentation, py module _sphinx-multiversion_ is used and added as extension in conf.py.
Further steps about configuring the project to enable multiversioning documentation can be found [here](https://holzhaus.github.io/sphinx-multiversion/master/quickstart.html).


### 3.2 Use type hints
Find a type hint cheat sheet [here](https://mypy.readthedocs.io/en/stable/cheat_sheet_py3.html)

## 4. Write Tests
A good developer always writes test cases after he/she develop a new feature or add a new function
to the existing ones. The test cases determine if different features within a system are performing as expected and can also help reveal errors or defects within the system.
Unit testing methodology is adopted in this work and is achieved using **pytest** framework.

### 4.1 Configuring Pycharm
Add pytest package from Python Package tool window or by running the following command in terminal.

```
pip install pytest 
```
**NOTE:**     
To ensure all pytest-specific features are available, set the test runner manually:
press Ctrl+Alt+S to open the IDE settings and select Tools | Python Integrated Tools,
and then select pytest from the Default test runner list.

### 4.2 Writing a test case
- Navigate to method or class for which you want to create the test case and perform a right click.

- From the context menu, choose Go To | Test

- PyCharm shows the list of available tests 

- To add one select Create New Test

- Pycharm navigates to test_databaseclasses.py and adds the testscase for the
choosen method with a prefix *'test'*

- While writing tests make use of my_transistor fixture to generate transistor object. Modifying this fixture is **not recommended** as it can affect other test cases
 
More information on how to write test cases using pytest can be inferred from [here](https://www.jetbrains.com/help/pycharm/pytest.html).

**NOTE:**      
The test case name should be either of *test_methodname* or *methodname_test* format for pycharm to associate the test case
with respective method that needs to be tested.

## 5. generate pip package

### 5.1 generate requirements.txt
File 'requirements.txt' is auto generated by pipreqs. To install pipreqs, do the following
```
pip install pipreqs
```
Generate the 'requirements.txt'-file
```
pipreqs /home/project/location/transistor_database
```
Further information can be found [here](https://pypi.org/project/pipreqs/)

### 5.2 Generate pip-package by using setup.py
Some useful links
 * [classifiers](https://pypi.org/classifiers/)
Run setup.py as the following from your operating system command line
```
python3 setup.py bdist_wheel 
```
Please find the generated pip package inside the /dist-folder

### 5.3 Test the pip package from local installation before uploading 
```
python3 -m pip install transistordatabase-x.x.x-py3-none-any.whl  
```

### 5.4 Upload pip package to pypi
Run this from your operating system command line
```
twine upload --repository pypi dist/* 
```

### 5.5 Hint
Note: 2.2 and 2.3 can also be done by installing the package direct from the source code into python. You need to reinstall it after any change in the source-code if you want to work with the latest version.
```
cd /path/of/python/package
python3 -m pip install -e .
```

 
